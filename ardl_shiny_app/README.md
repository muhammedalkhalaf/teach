# نظام الاختيار الآلي لنماذج ARDL - تطبيق Shiny

## نظرة عامة

تطبيق **R Shiny** متقدم للاختيار الآلي لنماذج ARDL (Autoregressive Distributed Lag) بمنهجية **"التشخيص أولاً"**، حيث يتم تقييم النماذج بناءً على السلامة التشخيصية قبل معايير المعلومات (AIC/BIC).

### المبدأ الأساسي

> **النموذج السليم تشخيصياً > النموذج الأمثل وفق AIC/BIC**

هذا التطبيق يضمن عدم اختيار نموذج يحتوي على ارتباط ذاتي أو مشاكل تشخيصية أخرى حتى لو كان لديه أفضل AIC.

---

## الميزات الرئيسية

### 1. واجهة عربية كاملة
- جميع النصوص والتسميات بالعربية
- دعم خطوط Cairo للعربية
- تخطيط من اليمين لليسار (RTL)

### 2. استيراد بيانات مرن
- دعم CSV و Excel (.xlsx)
- خيار استخدام بيانات تجريبية
- إنشاء فهرس زمني تلقائي أو يدوي

### 3. اختبارات ما قبل التقدير
- **ADF** (Augmented Dickey-Fuller) - ثلاث حالات
- **PP** (Phillips-Perron)
- **KPSS** (Kwiatkowski-Phillips-Schmidt-Shin) - حالتين
- رسوم ACF و PACF

### 4. بحث آلي شامل
- توليد آلاف النماذج المرشحة
- تنقية تلقائية للنماذج الفاشلة
- معالجة متوازية لتسريع الحسابات

### 5. نظام تقييم متقدم

#### المرشّحات الصارمة (فشل أي منها = استبعاد)
1. **Breusch-Godfrey Test** - خلو من الارتباط الذاتي
2. **ECT (Error Correction Term)** - سالب ومعنوي إحصائياً

#### معايير إضافية
3. عدم تجانس التباين (Breusch-Pagan, ARCH)
4. الاستقرار (CUSUM, CUSUMSQ)
5. معنوية معاملات الأجل الطويل
6. المنطق الاقتصادي للإشارات
7. Bounds Test للتكامل المشترك
8. معايير المعلومات (مرجعية فقط)

### 6. تشخيصات شاملة
- Breusch-Godfrey (ارتباط ذاتي)
- Breusch-Pagan (عدم تجانس)
- ARCH (تجانس الشرطي)
- Jarque-Bera (التوزيع الطبيعي)
- CUSUM و CUSUMSQ (الاستقرار)
- Bounds Test (التكامل المشترك)

### 7. واجهة تفاعلية متعددة التبويبات
1. **البيانات** - معاينة وإحصاءات ورسوم
2. **الاستقرارية** - اختبارات جذر الوحدة
3. **مساحة البحث** - معلومات البحث والتقدم
4. **مقارنة النماذج** - جدول أفضل N نموذج
5. **النموذج الأفضل** - تفاصيل كاملة
6. **التشخيصات** - اختبارات ورسوم شاملة
7. **التصدير** - تنزيل النتائج والتقارير

### 8. خيارات التصدير
- CSV و Excel للجداول
- PNG و PDF للرسوم
- تقرير Word عربي شامل
- كود R لإعادة الإنتاج

---

## المتطلبات

### البرمجيات
- **R** >= 4.0.0 (يُنصح بـ 4.3.0 أو أحدث)
- **RStudio** (اختياري، لكن موصى به)

### الحزم المطلوبة

سيتم تثبيتها تلقائياً عبر `install.R`:

```r
# واجهة المستخدم
shiny, DT, shinythemes, shinyWidgets

# البيانات
readr, readxl, writexl, data.table

# السلاسل الزمنية
zoo, xts, forecast, tseries

# ARDL
ARDL, dynamac

# الاختبارات
lmtest, sandwich, urca, car, strucchange, FinTS

# الرسوم
ggplot2, gridExtra, plotly

# التقارير
rmarkdown, knitr, officer, flextable
```

---

## التثبيت والتشغيل

### 1. تثبيت الحزم

```r
# افتح R أو RStudio وشغل:
source("install.R")
```

سيقوم السكربت بتثبيت جميع الحزم المطلوبة تلقائياً.

### 2. تشغيل التطبيق

#### الطريقة الأولى (من R/RStudio):
```r
shiny::runApp("app.R")
```

#### الطريقة الثانية (من سطر الأوامر):
```bash
Rscript -e "shiny::runApp('app.R')"
```

#### الطريقة الثالثة (من RStudio):
- افتح ملف `app.R`
- اضغط على زر "Run App" في الأعلى

---

## دليل الاستخدام

### الخطوة 1: استيراد البيانات

1. اضغط على "اختر ملف البيانات" وحمّل ملف CSV أو Excel
   - **أو** فعّل خيار "استخدام بيانات تجريبية"

2. حدد إعدادات الفهرس الزمني:
   - عمود التاريخ (إن وُجد)
   - سنة البدء والفترة
   - التكرار (سنوي/ربع سنوي/شهري)

### الخطوة 2: تحديد المتغيرات

1. اختر **المتغير التابع** من القائمة المنسدلة
2. حدد **المتغيرات المستقلة** من مربعات الاختيار

### الخطوة 3: إعدادات النموذج

1. **الحد الأقصى لتأخيرات المتغير التابع (p)** - افتراضي: 4
2. **الحد الأقصى لتأخيرات المتغيرات المستقلة (q)** - افتراضي: 4
3. **المكونات الحتمية**:
   - تلقائي (يختبر جميع الحالات)
   - ثابت فقط
   - اتجاه فقط
   - ثابت + اتجاه
   - بدون

### الخطوة 4: إعدادات الاختبارات

1. **مستوى المعنوية (α)** - افتراضي: 5%
2. **رتبة اختبار Breusch-Godfrey** - افتراضي: 2
3. **المعالجة المتوازية** - لتسريع الحسابات

### الخطوة 5: تشغيل التحليل

اضغط على زر **"تشغيل التحليل"**

سيقوم التطبيق بـ:
1. اختبار استقرارية جميع المتغيرات
2. توليد شبكة النماذج المرشحة
3. تقدير كل نموذج
4. تطبيق التشخيصات الشاملة
5. تقييم وترتيب النماذج
6. اختيار الأفضل

### الخطوة 6: استعراض النتائج

تجول بين التبويبات لاستعراض:
- اختبارات الاستقرارية
- جدول مقارنة النماذج
- تفاصيل النموذج الأفضل
- التشخيصات الكاملة

### الخطوة 7: التصدير

انتقل إلى تبويب "التصدير" وحمّل:
- جداول النتائج (CSV/Excel)
- الرسوم البيانية (PNG/PDF)
- التقرير الشامل (Word)
- كود R لإعادة الإنتاج

---

## نظام التقييم بالتفصيل

### نقاط التقييم

| المعيار | النقاط | ملاحظات |
|---------|--------|---------|
| **اجتياز BG** | شرط لازم | فشل = 0 |
| **ECT سالب ومعنوي** | شرط لازم | فشل = 0 |
| **تجانس التباين (BP+ARCH)** | +2 / -1 | نجاح/فشل |
| **الاستقرار (CUSUM+CUSUMSQ)** | +2 / -3 | نجاح/فشل |
| **معنوية متغير طويل الأجل** | +1 | لكل متغير |
| **تطابق الإشارة الاقتصادية** | +1 / -1 | لكل متغير |
| **Bounds Test** | +1 | إذا نجح |
| **أفضل 10% في AIC** | +1 | مكافأة بسيطة |

### مثال عملي

لنفترض نموذجين:

**النموذج A:**
- BG: فشل (ارتباط ذاتي موجود)
- AIC: 150 (الأفضل)

**النموذج B:**
- BG: نجح
- ECT: -0.3 (معنوي)
- الاستقرار: نجح
- AIC: 155

**النتيجة:** يتم اختيار النموذج B لأن A فشل في المرشّح الصارم الأول.

---

## البيانات التجريبية

يتضمن التطبيق مولّد بيانات تركيبية يُنشئ:
- 100 مشاهدة
- متغير تابع Y
- متغيرين مستقلين X1, X2
- علاقة تكامل مشترك حقيقية

لاستخدامها، فعّل خيار "استخدام بيانات تجريبية".

---

## الأسئلة الشائعة

### 1. لماذا لا توجد نماذج ناجحة؟

قد يحدث هذا إذا:
- البيانات غير مستقرة بشكل كافٍ
- لا توجد علاقة تكامل مشترك
- الحدود القصوى للتأخيرات منخفضة جداً

**الحل:**
- زد الحد الأقصى لـ p و q
- جرب مكونات حتمية مختلفة
- افحص استقرارية البيانات أولاً

### 2. التطبيق بطيء جداً؟

**الحل:**
- فعّل "المعالجة المتوازية"
- قلل الحد الأقصى للتأخيرات
- قلل عدد المتغيرات المستقلة

### 3. كيف أفسر ECT؟

- **ECT سالب ومعنوي**: جيد - يوجد تصحيح خطأ
- **ECT موجب**: سيء - لا يوجد ارتداد للتوازن
- **ECT غير معنوي**: لا توجد علاقة طويلة الأجل واضحة

### 4. ما الفرق بين الأجل الطويل والقصير؟

- **الأجل الطويل (Long-Run)**: العلاقة التوازنية بين المتغيرات
- **الأجل القصير (Short-Run)**: التعديلات الديناميكية والانحرافات المؤقتة

---

## البنية التقنية

### الملفات الرئيسية

```
ardl_shiny_app/
│
├── app.R              # التطبيق الرئيسي (UI + Server)
├── helpers.R          # الدوال المساعدة
├── install.R          # تثبيت الحزم
├── README.md          # هذا الملف
│
├── data/              # مجلد البيانات
│   └── (ملفات البيانات)
│
├── www/               # الموارد الثابتة (CSS, JS, صور)
│
└── reports/           # قوالب التقارير
    └── (قوالب RMarkdown)
```

### الدوال الرئيسية في `helpers.R`

1. **data_ingest()** - استيراد البيانات
2. **time_index_resolver()** - الفهرسة الزمنية
3. **unit_root_tests()** - اختبارات الاستقرارية
4. **build_search_grid()** - بناء شبكة البحث
5. **fit_ardl_candidate()** - تقدير نموذج واحد
6. **diagnostics_bundle()** - التشخيصات الشاملة
7. **bounds_test_wrapper()** - Bounds Test
8. **ect_extract()** - استخراج ECT
9. **stability_tests()** - CUSUM/CUSUMSQ
10. **score_model()** - التقييم
11. **rank_and_summarize()** - الترتيب
12. **generate_synthetic_data()** - البيانات التجريبية

---

## الإصدار والتوافق

- **الإصدار الحالي:** 1.0.0
- **تاريخ الإصدار:** 2025-10-22
- **متوافق مع R:** >= 4.0.0
- **الحزم الأساسية:**
  - ARDL >= 0.2.0
  - lmtest >= 0.9-40
  - urca >= 1.3-3
  - strucchange >= 1.5-3

---

## المراجع العلمية

### ARDL Methodology
- Pesaran, M. H., Shin, Y., & Smith, R. J. (2001). Bounds testing approaches to the analysis of level relationships. *Journal of Applied Econometrics*, 16(3), 289-326.

### Diagnostic Tests
- Breusch, T. S. (1978). Testing for autocorrelation in dynamic linear models. *Australian Economic Papers*, 17(31), 334-355.
- Godfrey, L. G. (1978). Testing against general autoregressive and moving average error models. *Econometrica*, 46(6), 1293-1301.

### Unit Root Tests
- Dickey, D. A., & Fuller, W. A. (1979). Distribution of the estimators for autoregressive time series with a unit root. *Journal of the American Statistical Association*, 74(366a), 427-431.
- Phillips, P. C., & Perron, P. (1988). Testing for a unit root in time series regression. *Biometrika*, 75(2), 335-346.
- Kwiatkowski, D., Phillips, P. C., Schmidt, P., & Shin, Y. (1992). Testing the null hypothesis of stationarity. *Journal of Econometrics*, 54(1-3), 159-178.

---

## الدعم والمساهمة

### الإبلاغ عن مشاكل
إذا واجهت أي مشكلة، يرجى:
1. التحقق من أن جميع الحزم مثبتة بشكل صحيح
2. مراجعة رسائل الأخطاء في وحدة التحكم
3. التأكد من صحة صيغة البيانات

### التطوير المستقبلي
- [ ] إضافة نماذج NARDL (Non-linear ARDL)
- [ ] دعم المزيد من اللغات
- [ ] تحسين الأداء للبيانات الكبيرة
- [ ] إضافة التنبؤ (Forecasting)
- [ ] تصدير إلى LaTeX

---

## الترخيص

هذا التطبيق مُتاح للاستخدام الأكاديمي والبحثي.

---

## الاعتمادات

تم بناء هذا التطبيق بالاعتماد على:
- **حزمة ARDL** من CRAN
- **Shiny** من RStudio
- مكتبات R الإحصائية المتنوعة

---

## الاتصال

للاستفسارات أو الملاحظات، يرجى فتح Issue على GitHub.

---

**تم الإنشاء بواسطة:** خبير اقتصاد قياسي
**التاريخ:** 2025-10-22
**الإصدار:** 1.0.0

---

## ملاحظات الإصدار

### v1.0.0 (2025-10-22)
- ✅ الإصدار الأولي
- ✅ واجهة عربية كاملة
- ✅ نظام التقييم "التشخيص أولاً"
- ✅ تشخيصات شاملة
- ✅ بيانات تجريبية
- ✅ تصدير متعدد الصيغ

---

**استمتع باستخدام التطبيق! 🚀**
